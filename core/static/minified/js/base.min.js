"use strict";var e="#0e1e0a";var n="nav-menu__link--current";var k=8;var f=3;var o=$(window);var r;var a=window.matchMedia("only screen and (max-width: 991.98px)").matches;function s(){var o=$(this).children(".dropdown-menu");o.show();var t=$(this).children("a:first-child");if(!t.o(n)){t.t("color",e)}t.i("aria-expanded","true");if(o.is(":visible")){o.parent().l("show")}}function i(){var o=$(this).children(".dropdown-menu");o.show();var t=$(this).children("a:first-child");if(!t.o(n)){t.t("color",e)}t.i("aria-expanded","true");o.t({position:"",inset:"",margin:"",transform:""})}function c(o){var t=$(this).children(".dropdown-menu");t.hide();var e=$(this).children("a:first-child");if(!e.o(n)){e.t("color","white")}e.i("aria-expanded","false")}function l(o){var t=$(this).children(".dropdown-menu-end");t.u("show");t.show();t.t({position:"absolute",inset:"0px auto auto 0px",margin:"0px",transform:"translate(-96px, 67px)"});var e=$(this).children("a:first-child");e.i("aria-expanded","true");e.t("filter","drop-shadow(rgba(255, 255, 255, 0.5) 0px 2px 5px)")}function d(){var o=$(this).children(".dropdown-menu-end");o.p("show");o.hide();var t=$(this).children("a:first-child");t.i("aria-expanded","false");t.t("filter","")}function u(){var o=$(this).children(".dropdown-menu-end");o.u("show");o.show();o.t({position:"absolute",inset:"0px auto auto 0px",margin:"0px",transform:"translate(-235px, 40px)"})}function p(){var o=$(this).children(".dropdown-menu-end");o.p("show");o.hide()}function w(o){return/^\d+$/.test(o)}function t(){return"id"+Math.random().toString(16).slice(2)}function j(o){return/^(?=.*\d)[\d ]+$/.test(o)}function x(o){return/^[A-ZÀ-Ÿa-z]{4}[A-ZÀ-Ÿa-z0-9-_]{0,11}$/.test(o)}function g(o){return/^(?:[A-ZÀ-Ÿa-z]+(?:-[A-ZÀ-Ÿa-z]+)*)+[\s]+(?:[A-ZÀ-Ÿa-z]+(?:-[A-ZÀ-Ÿa-z]+)*)+[\s]*(?:[A-ZÀ-Ÿa-z]+(?:-[A-ZÀ-Ÿa-z]+)*)*$/.test(o)}function v(o){var t=$(".js-errors");t.text("");var e=o.target,n=o.data;var r=false,a=false;var s=false,i=false;var c=e.v.value;if(!g(c)){t.append("<p>"+n.m+"</p>")}else{a=true}var f=e.username.value;if(!x(f)){t.append("<p>"+n.$+"</p>")}else{r=true}if(e.name=="edit-profile-form"){i=true}else{var l=e.h.value;if(l.length<k||w(l)){t.append("<p>"+n.k+"</p>")}else{i=true}}var d=$("tbody .js-number");var u=[];d.j(function(){u.push(this.value)});s=true;for(var p=0;p<u.length;p++){if(!j(u[p])){s=false;t.append("<p>"+n.g+"</p>");break}}var v=$("tbody .checkboxinput");var m=[];v.j(function(){m.push(this.checked)});var b=m.length;for(var p=0;p<b;p++){if(m[p]){break}if(p==b-1){s=false;t.append("<p>"+n.T+"</p>")}}if(!s||!i||!a||!r){o.preventDefault();t.u("alert alert-danger");alert(n.I);var h=document.querySelector("a[name='top']");h.click();window.history.replaceState({},document.title,".")}}function m(o){var t=o.target,e=o.data;var n=t.C.value,r=false;var a=$(".js-gallery > .js-photo-wrp").length,s=false;if(a>=f){s=true}if(j(n)){r=true}if(s&&r){}else{alert(e.I)}var i=$(".js-photo-errors");if(!s){o.preventDefault();i.text("").u("alert alert-danger");i.append("<p>"+e.A+"</p>")}else{i.text("");i.p()}var c=$(".js-price-errors");if(!r){o.preventDefault();c.text("").u("alert alert-danger");c.append("<p>"+e.Z+"</p>")}else{c.text("");c.p()}}function b(o){var t=parseInt($(".js-category").first()._(),10);var n=$(".js-subcategory");$.q({url:o.data.url,data:{R:t},S:"json",O:function(o){var t=o["U"];n.empty();$.j(t,function(o,t){var e="<option value="+t.id+">"+t.name+"</option>";n.append(e)});n.prepend(" \t\t\t\t<option value='' selected='selected'> \t\t\t\t\t--------- \t\t\t\t</option>")}})}function h(o){var t=$(".js-condition").first();var e=t._();var n=o.data.X;var r="<span class='form-text text-muted'>"+n[e]+"</span>";t.parent().children("span:last-child").remove();t.after(r)}function y(o){var t=o.target.value;var e=$(".js-descrLabelText").first().text();var n=e+"*";var r=$(".js-condition-description").first();var a=r.D();if(t==="N"){a.text(e);r.L("required")}else{a.text(n);r.i("required","")}}function T(o){o.data.M.t("border","none");var t=o.target;var e=$(t);e.t("border","2px inset #198754");var n=$(".js-expanded-img");n.i({src:t.src,alt:t.alt})}function I(){var o=$(".js-login-required-toast").first();o.t({color:"#842029","border-color":"#f5c2c7"});var t=new bootstrap.F(o[0]);t.show()}function C(){var o=$(".js-self-vote-toast").first();o.t({color:"#842029","border-color":"#f5c2c7"});var t=new bootstrap.F(o[0]);t.show()}function z(){var o=$(".js-error-occurred-toast").first();o.t({color:"#842029","border-color":"#f5c2c7"});var t=new bootstrap.F(o[0]);t.show()}function A(o){var t;if(o)t=$(".js-bookmark-added-toast").first();else t=$(".js-bookmark-removed-toast").first();var e=new bootstrap.F(t[0]);e.show()}function Z(o){var t;if(o)t=$(".js-followed-toast").first();else t=$(".js-unfollowed-toast").first();var e=new bootstrap.F(t[0]);e.show()}function _(o){var t=$(".js-custom-success-toast").first();var e=$(".js-toast-message");e.P(o);var n=new bootstrap.F(t[0]);n.show()}function q(o){var t=$(".js-custom-error-toast").first();t.t({color:"#842029","border-color":"#f5c2c7"});var e=$(".js-toast-message");e.P(o);var n=new bootstrap.F(t[0]);n.show()}function R(){var o=$(".js-headerDropdown");var t=$(".js-headerAccountInfo");a=window.matchMedia("only screen and (max-width: 991.98px)").matches;var e=!a;if(e){var n=$(".js-loginDropdown");o.H(s,c);o.click(i);t.H(l,d);t.click(l);n.H(u,p);n.click(u)}else if(a){o.N();t.N()}}o.W("resize",function(){var o=$(this);var t=o.width();if(t!==r){r=t;R()}});$(document).ready(function(){R();r=o.width()});$(".js-bookmark-button").click(function(o){if(!userId){I();return false}var t=$(this);var n=t.children("i"),e=parseInt(this.dataset.id,10);if(n.o("js-selected")){var r="recall-bookmark";$.q({url:bookmarkUrl,type:"POST",data:{id:e,action:r},S:"json",B:function(o){o.setRequestHeader("X-CSRFToken",csrfToken)},O:function(o){if(o["G"]){n.p("fas js-selected").u("far");var t=parseInt($bookmarkCounter.text(),10);$bookmarkCounter.text(t-1);var e=n[0].nextSibling;e.textContent=" "+bookmarkText;A(false)}else{console.error(o);z()}}})}else{var r="bookmark";$.q({url:bookmarkUrl,type:"POST",data:{id:e,action:r},S:"json",B:function(o){o.setRequestHeader("X-CSRFToken",csrfToken)},O:function(o){if(o["J"]){n.p("far").u("fas js-selected");var t=parseInt($bookmarkCounter.text(),10);$bookmarkCounter.text(t+1);var e=n[0].nextSibling;e.textContent=" "+bookmarkedText;A(true)}else{console.error(o);z()}}})}});document.addEventListener("DOMContentLoaded",function(){"use strict";let u={K:"XMLHttpRequest",V:"application/x-www-form-urlencoded"};const s=function(o,t){let e=10;let n=1;let r=0;let a=setInterval(function(){if(n<=r){n=r;clearInterval(a)}o.style.opacity=n;n-=1/(1e3/e*t)},e)};const i=function(o,t){let e=20;let n=0;let r=1;let a=setInterval(function(){if(n>=r){n=r;clearInterval(a)}o.style.opacity=n;n+=1/(1e3/e*t)},e)};const p=function(o,t,e,n){if(n==="add"){o.classList.add(...t);o.classList.remove(...e)}else{o.classList.remove(...t);o.classList.add(...e)}};const v=function(o,t){const e=o.querySelector("span");var n=e.querySelector("span");var n=document.querySelector(".js-first-child").previousElementSibling;if(n){if(t=="add"){var r=document.querySelector(".js-remove-flag").textContent;n.textContent=r}else{var r=document.querySelector(".js-report-content").textContent;n.textContent=r}}};const m=function(o,t){const e=o.querySelector("span");if(e.hasAttribute("title")){if(t=="add"){var n=document.querySelector(".js-remove-flag").textContent;e.setAttribute("title",n)}else{var n=document.querySelector(".js-report-content").textContent;e.setAttribute("title",n)}}};const $=function(o,t,e,n=2){switch(t){case-1:t="danger";break;case 0:t="success";break;case 1:t="warning";break}const r="alert-"+t;const a=document.createElement("div");a.classList.add("h6");a.classList.add("alert");a.classList.add(r);a.innerHTML=e;o.prepend(a);c(a);i(a,n);setTimeout(()=>{s(a,n)},n*1e3);setTimeout(()=>{a.remove()},2e3*n)};const c=function(o){const t=200;const e=o.style.position==="fixed";if(o.scrollTop>t&&!e){o.setAttribute("style","{'position': 'fixed', 'top': '0px'}")}if(o.scrollTop<t&&e){o.setAttribute("style","{'position': 'static', 'top': '0px'}")}};const b=function(o){o.style.display="none";o.querySelector("form").reset();o.querySelector("textarea").style.display="none"};const h=function(o){const t=o.currentTarget.nextElementSibling;t.style.display="block"};const k=function(o){f(o.currentTarget,"remove")};const w=function(t){return Object.keys(t).map(function(o){return encodeURIComponent(o)+"="+encodeURIComponent(t[o])}).join("&")};const f=function(o,t="add"){let s,e=null,n=null;if(t!=="add"){t="remove";s=o}else{s=o.closest(".report-modal-form-combined").firstElementChild;n=o.querySelector('input[name="reason"]:checked').value;e=o.querySelector("textarea").value}const r=s.getAttribute("data-url");const a=s.getAttribute("data-app-name");const i=s.getAttribute("data-model-name");const c=s.getAttribute("data-model-id");const f=s.getAttribute("data-csrf");const l={Y:a,oo:i,eo:c};if(n){l["reason"]=n}if(e){l["info"]=e}const d=w(l);u["no"]=f;fetch(r,{method:"post",headers:u,body:d}).then(function(o){return o.json()}).then(function(t){const e=["user-has-flagged","fas"];const n=["user-has-not-flagged","far"];const r=s.querySelector(".flag-icon");if(t){$(s.parentElement,t.status,t.ro);const a=s.nextElementSibling;let o;if(t.ao===1){o="add";b(a);s.removeEventListener("click",h);s.addEventListener("click",k)}else{o="remove";s.removeEventListener("click",k);s.addEventListener("click",h);j(s)}p(r,e,n,o);v(s,o);m(s,o)}}).catch(function(o){console.error(o);var t=document.querySelector(".js-flag-alert-msg").textContent;q(t)})};const j=function(o,t=null){if(!t){t=o.nextElementSibling.parentElement}const e=t.querySelector(".flag-report-modal");o.addEventListener("click",h);const n=t.querySelector(".report-modal-close");n.onclick=function(){b(e)};const r=t.querySelector(".report-modal-form");const a=r.querySelector(".last-flag-reason");const s=r.querySelector(".report-modal-form-info");r.onchange=function(o){if(o.target.value===a.value){s.required=true;s.style.display="block"}else{s.style.display="none";s.removeAttribute("required")}};r.onsubmit=function(o){o.preventDefault();f(r,"add")}};const o=document.getElementsByClassName("report-modal-form-combined");for(const t of o){const e=t.querySelector(".flag-report-modal");window.onclick=function(o){if(o.target==e){b(e)}};const n=t.querySelector(".flag-report-icon");const r=n.querySelector(".flag-icon");if(r.classList.contains("user-has-not-flagged")){j(n,t)}else{n.addEventListener("click",k)}}});